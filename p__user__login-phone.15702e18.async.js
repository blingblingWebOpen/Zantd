(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"1qI+":function(e,a,t){e.exports={main:"main___1tN1c",icon:"icon___ONM1p",other:"other___TubuO",register:"register___3V9LA"}},"5rWG":function(e,a,t){"use strict";t.r(a);t("sRBo");var n=t("kaz8"),r=t("k1fw"),c=t("tJVT"),o=(t("fOrg"),t("+KLJ")),l=t("q1tI"),s=t.n(l),i=t("9kvl"),u=t("1qI+"),m=t.n(u),p=(t("y8nQ"),t("Vl3Y")),b=(t("Znn+"),t("ZTPi")),d=t("oBTY"),g=t("yUgw"),f=t("TSYQ"),h=t.n(f),v=Object(l["createContext"])({}),E=v,O=(t("14J3"),t("BMrR")),j=(t("+L6B"),t("2/Rp")),_=(t("jCWc"),t("kPKH")),C=(t("5NDa"),t("5rEg")),y=t("0Owb"),w=t("WmNS"),x=t.n(w),N=(t("miYZ"),t("tsqr")),P=t("9og8"),T=t("PpiC"),k=t("BGR+"),S=t("cJ7L"),I=t("MGYb"),q=t("FQ2w"),U=t("cGnJ"),V=t("xvV3"),B=t.n(V),J={UserName:{props:{size:"large",id:"userName",prefix:s.a.createElement(S["a"],{style:{color:"#1890ff"},className:B.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:s.a.createElement(I["a"],{className:B.a.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:s.a.createElement(q["a"],{className:B.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:s.a.createElement(U["a"],{className:B.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},z=t("aEuy"),L=p["a"].Item,M=function(e){var a=e.onChange,t=e.defaultValue,n=e.customProps,r=void 0===n?{}:n,c=e.rules,o={rules:c||r.rules};return a&&(o.onChange=a),t&&(o.initialValue=t),o},R=function(e){var a=Object(l["useState"])(e.countDown||0),t=Object(c["a"])(a,2),n=t[0],o=t[1],i=Object(l["useState"])(!1),u=Object(c["a"])(i,2),m=u[0],p=u[1];console.log("\u6253\u5370\u5b50\u7ec4\u4ef6\u83b7\u53d6\u7236\u7ec4\u4ef6\u503c",e.data_alldata);e.onChange;var b=e.customProps,d=(e.defaultValue,e.rules,e.name),g=(e.getCaptchaButtonText,e.getCaptchaSecondText,e.updateActive,e.type),f=(e.tabUtil,Object(T["a"])(e,["onChange","customProps","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type","tabUtil"])),h=Object(l["useCallback"])(function(){var a=Object(P["a"])(x.a.mark((function a(t){var n,c,o,l;return x.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log("\u6253\u5370\u6570\u636e222222222",e),n={},c=Object(r["a"])(Object(r["a"])({},n),{},{name:e.data_alldata.alldata.name,encode:e.data_alldata.alldata.encode,mobile:t}),console.log("\u6253\u5370\u6570\u636e222222222",c),o=/^[1][3,4,5,6,7,8,9][0-9]{9}$/,o.test(t)){a.next=8;break}return N["b"].warn("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\uff01"),a.abrupt("return");case 8:return a.next=10,Object(z["b"])(c);case 10:if(l=a.sent,console.log("\u6253\u5370\u77ed\u4fe1\u63a5\u53e3\u7ed3\u679c",l),!1!==l){a.next=14;break}return a.abrupt("return");case 14:N["b"].success("\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f\uff01"),p(!0);case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[]);if(Object(l["useEffect"])((function(){var a=0,t=e.countDown;return m&&(a=window.setInterval((function(){o((function(e){return e<=1?(p(!1),clearInterval(a),t||60):e-1}))}),1e3)),function(){return clearInterval(a)}}),[m]),!d)return null;var v=M(e),E=f||{};if("Captcha"===g){var w=Object(k["a"])(E,["onGetCaptcha","countDown"]);return s.a.createElement(L,{shouldUpdate:!0},(function(e){var a=e.getFieldValue;return s.a.createElement(O["a"],{gutter:8},s.a.createElement(_["a"],{span:16},s.a.createElement(L,Object(y["a"])({name:d},v),s.a.createElement(C["a"],Object(y["a"])({},b,w)))),s.a.createElement(_["a"],{span:8},s.a.createElement(j["a"],{disabled:m,className:B.a.getCaptcha,size:"large",onClick:function(){var e=a("mobile");h(e)}},m?"".concat(n," \u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")))}))}return s.a.createElement(L,Object(y["a"])({name:d},v),s.a.createElement(C["a"],Object(y["a"])({},b,E)))},A={};Object.keys(J).forEach((function(e){var a=J[e];A[e]=function(t){return s.a.createElement(E.Consumer,null,(function(n){return s.a.createElement(R,Object(y["a"])({customProps:a.props,rules:a.rules},t,{type:e},n,{updateActive:n.updateActive}))}))}}));var K=A,D=p["a"].Item,G=function(e){var a=e.className,t=Object(T["a"])(e,["className"]),n=h()(B.a.submit,a);return s.a.createElement(D,null,s.a.createElement(j["a"],Object(y["a"])({size:"large",className:n,type:"primary",htmlType:"submit"},t)))},Y=G,F=b["a"].TabPane,W=function(){var e=0;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(a).concat(e)}}(),Q=function(e){Object(l["useEffect"])((function(){var a=W("login-tab-"),t=e.tabUtil;t&&t.addTab(a)}),[]);var a=e.children;return s.a.createElement(F,e,e.active&&a)},Z=function(e){return s.a.createElement(E.Consumer,null,(function(a){return s.a.createElement(Q,Object(y["a"])({tabUtil:a.tabUtil},e))}))};Z.typeName="LoginTab";var $=Z,H=function(e){var a=e.className,t=Object(l["useState"])([]),n=Object(c["a"])(t,2),r=n[0],o=n[1],i=Object(l["useState"])({}),u=Object(c["a"])(i,2),m=u[0],f=u[1],v=Object(g["a"])("",{value:e.activeKey,onChange:e.onTabChange}),O=Object(c["a"])(v,2),j=O[0],_=O[1];console.log("\u6253\u5370\u77ed\u4fe1\u7ec4\u4ef6prop",e);var C=[],y=[];return s.a.Children.forEach(e.children,(function(e){e&&("LoginTab"===e.type.typeName?C.push(e):y.push(e))})),s.a.createElement(E.Provider,{value:{tabUtil:{addTab:function(e){o([].concat(Object(d["a"])(r),[e]))},removeTab:function(e){o(r.filter((function(a){return a!==e})))}},updateActive:function(e){m&&m[j]?m[j].push(e):m&&(m[j]=[e]),f(m)}}},s.a.createElement("div",{className:h()(a,B.a.login)},s.a.createElement(p["a"],{form:e.form,onFinish:function(a){e.onSubmit&&e.onSubmit(a)}},r.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(b["a"],{animated:!1,className:B.a.tabs,activeKey:j,onChange:function(e){_(e)}},C),y):e.children)))};H.Tab=$,H.Submit=Y,H.UserName=K.UserName,H.Password=K.Password,H.Mobile=K.Mobile,H.Captcha=K.Captcha;var X=H,ee=X.Tab,ae=X.UserName,te=X.Password,ne=X.Mobile,re=X.Captcha,ce=X.Submit,oe=function(e){var a=e.content;return s.a.createElement(o["a"],{style:{marginBottom:24},message:a,type:"error",showIcon:!0})},le=function(e,a){var t=a.location,o=e.loginPhone,i=void 0===o?{}:o,u=e.submitting,p=e.history,b=i.status,d=i.type,g=Object(l["useState"])(!0),f=Object(c["a"])(g,2),h=f[0],v=f[1],E=Object(l["useState"])("mobile"),O=Object(c["a"])(E,2),j=O[0],_=O[1];console.log(e),console.log(t),console.log("\u6253\u5370\u62ff\u5230\u5f97\u503calldata",p.location.state);var C=p.location.state,y=function(a){var t=e.dispatch;console.log("\u6253\u5370\u6570\u636e",a),t({type:"loginPhone/login",payload:Object(r["a"])(Object(r["a"])({},a),{},{type:j,alldata:C})})};return s.a.createElement("div",{className:m.a.main},s.a.createElement(X,{activeKey:j,onTabChange:_,onSubmit:y},s.a.createElement(ee,{key:"account",disabled:!0,tab:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"},"500"==b&&s.a.createElement(oe,{content:"\u8d26\u6237\u6216\u5bc6\u7801\u9519\u8bef"}),s.a.createElement(ae,{name:"name",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]}),s.a.createElement(te,{name:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]})),s.a.createElement(ee,{key:"mobile",tab:"\u624b\u673a\u53f7\u767b\u5f55"},"500"==b&&"mobile"===d&&!u&&s.a.createElement(oe,{content:"\u9a8c\u8bc1\u7801\u9519\u8bef"}),s.a.createElement(ne,{name:"mobile",placeholder:"\u624b\u673a\u53f7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff01"},{pattern:/^1\d{10}$/,message:"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff01"}]}),s.a.createElement(re,{name:"verifyCode",placeholder:"\u9a8c\u8bc1\u7801",countDown:120,getCaptchaButtonText:"",getCaptchaSecondText:"\u79d2",data_alldata:C,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff01"}]})),s.a.createElement("div",null,s.a.createElement(n["a"],{checked:h,onChange:function(e){return v(e.target.checked)}},"\u81ea\u52a8\u767b\u5f55"),s.a.createElement("a",{style:{float:"right"}},"\u5fd8\u8bb0\u5bc6\u7801")),s.a.createElement(ce,{loading:u},"\u767b\u5f55")))};a["default"]=Object(i["c"])((function(e){var a=e.loginPhone,t=e.loading;return{loginPhone:a,submitting:t.effects["loginPhone/login"]}}))(le)},xvV3:function(e,a,t){e.exports={login:"login___2ysxE",getCaptcha:"getCaptcha___Pjx7V",icon:"icon___3qKvR",other:"other___2g9Jo",register:"register___3LpvR",prefixIcon:"prefixIcon___372Rs",submit:"submit___3-Tm6"}}}]);